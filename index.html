<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Final HTML Generator</title>

<style>
body{
  font-family:Arial,Helvetica,sans-serif;
  background:#f1f5f9;
  margin:0;
  padding:24px;
}
.box{
  max-width:1000px;
  margin:auto;
  background:#fff;
  border-radius:18px;
  padding:26px;
  box-shadow:0 20px 40px rgba(0,0,0,.12);
}
label{font-weight:700;display:block;margin-top:14px}
input,textarea{
  width:100%;
  padding:11px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:14px
}
textarea{height:260px;font-family:monospace}
button{
  margin-top:18px;
  padding:14px 20px;
  border:0;
  border-radius:12px;
  background:#2563eb;
  color:#fff;
  font-weight:900;
  cursor:pointer
}
button.secondary{background:#16a34a;margin-left:8px}
iframe{width:100%;height:560px;border:1px solid #cbd5e1;border-radius:14px;margin-top:14px}
.hint{font-size:12px;color:#64748b;margin-top:6px}
</style>
</head>
<body>

<div class="box">
  <h1>Final HTML Generator</h1>

  <label>Title</label>
  <input id="title">

  <label>Author</label>
  <input id="author">

  <label>Image URL</label>
  <input id="image">

  <label>PDF URL</label>
  <input id="pdf">

  <div class="hint">Live preview appears only when all fields are filled.</div>

  <button onclick="generate()">Generate HTML</button>
  <button class="secondary" onclick="copyHtml()">Copy HTML</button>

  <label>Generated HTML</label>
  <textarea id="output"></textarea>

  <label>Live Preview</label>
  <iframe id="preview"></iframe>
</div>

<script>
['title','author','image','pdf'].forEach(id=>{
  document.getElementById(id).addEventListener('input', generate);
});

function generate(){
  const t=title.value.trim();
  const a=author.value.trim();
  const i=image.value.trim();
  const p=pdf.value.trim();

  if(!t||!a||!i||!p){
    output.value='';
    preview.srcdoc='';
    return;
  }

  const d = `${a} 著『${t}』の公式PDF版を今すぐダウンロード。正規版・完全版を著者から直接入手できます。`;

  const html=`<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>${t}｜公式PDFダウンロード</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(135deg,#4f46e5,#0ea5e9);
}
.wrap{max-width:760px;margin:auto;padding:32px 16px}
.hero{
  background:#fff;
  border-radius:22px;
  padding:36px 26px;
  text-align:center;
  box-shadow:0 30px 60px rgba(0,0,0,.25)
}
.badge{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  padding:6px 16px;
  border-radius:999px;
  font-size:.75rem;
  font-weight:800
}
img{max-width:200px;border-radius:14px;margin:22px auto;display:block}
.stars{font-size:1.4rem;color:#facc15;font-weight:900}
.cta{
  display:inline-block;
  margin-top:26px;
  padding:18px 28px;
  border-radius:16px;
  background:linear-gradient(135deg,#2563eb,#1e40af);
  color:#fff;
  font-weight:900;
  text-decoration:none
}

/* FULLSCREEN PDF */
#pdfModal{
  display:none;
  position:fixed;
  inset:0;
  background:#000;
  z-index:99999;
}
#pdfModal iframe{
  width:100vw;
  height:100vh;
  border:0;
}
#closeBtn{
  position:fixed;
  top:12px;
  right:12px;
  z-index:100000;
  padding:10px 14px;
  border:0;
  border-radius:10px;
  background:#2563eb;
  color:#fff;
  font-weight:800;
}
</style>
</head>

<body>
<div class="wrap">
<section class="hero">
  <span class="badge">公式著者版</span>
  <img src="${i}">
  <h1>${t}</h1>
  <h2>著者：${a}</h2>
  <div class="stars">★★★★★</div>
  <p>${d}</p>
  <a class="cta" href="#" onclick="openPdf()">PDFを読む</a>
</section>
</div>

<div id="pdfModal">
  <button id="closeBtn" onclick="closePdf()">閉じる</button>
  <iframe src="${p}"></iframe>
</div>

<script>
function openPdf(){
  document.getElementById('pdfModal').style.display='block';
}
function closePdf(){
  document.getElementById('pdfModal').style.display='none';
}
document.addEventListener('keydown',e=>{
  if(e.key==='Escape') closePdf();
});
<\/script>
</body>
</html>`;

  output.value=html;
  preview.srcdoc=html;
}

function copyHtml(){
  if(!output.value) return alert('Nothing to copy');
  output.select();
  document.execCommand('copy');
  alert('HTML copied');
}
</script>

</body>
</html>
